<!DOCTYPE html>
<html>

<head>
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/Session.js"></script>         
  <!-- JS Moments -->
  <script src="assets/js/moment.min.js"></script>
  <!-- JS dataTables -->
  <script src="assets/js/jquery.dataTables.min.js"></script>
  <script src="assets/js/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
  
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body>
  <div class="ticket">
    <p class="centrado">TROPICAL SNO.<br>
      FACTURA # <label id=factura></label><br>
      Fecha: <label id="fecha"></label><br>
      Bodega: <label id="bodega"></label><br>
      Usuario: <label id="usuario"></label>
    </p>
    <table>
      <thead>
        <tr>
          <th  style="width:40%; text-align:left;">PRODUCTO&nbsp;&nbsp;</th>
          <th  style="width:30%; text-align:right;">CANTIDAD&nbsp;&nbsp;</th>
          <th  style="width:30%; text-align:right;">PRECIO</th>
          <spa>_______________________________________</spa>
        </tr>
      </thead>
      <tbody id="tableBody-TicketFactura">
      </tbody>
    </table>
    <p style="text-align:right;">TOTALES<br>
        Sub Total: <label id=subtotal></label><br>
        TOTAL: <label id="total"></label>
      </p>
    <p class="centrado">Facturado Descripci√≥n...</p>
    </br>
    <spa>_______________________________________</spa>
  </div>
  <script src="assets/js/FacturaCli.js"></script>
  <script src="assets/js/virtualNumPad/virtualNumPad.js"></script>
</body>

</html>

<script>
    $(document).ready(function () {

      $("#factura").text(localStorage.getItem("lsFactura")); //Numero de factura
      $("#fecha").text(localStorage.getItem("lsFecha"));  //
      $("#bodega").text(localStorage.getItem("lsBodega"));
      $("#usuario").text(localStorage.getItem("lsUsuario"));
      
      var listaProducto = localStorage.getItem("lsListaProducto");
      listaProducto = JSON.parse(listaProducto);
      $.each(listaProducto, function (i, item) {
          $('#tableBody-TicketFactura').append(`
                <tr> 
                    <td style="width:40%; text-align:left;">${item.detalle}</td>

                    <td style="width:30%; text-align:left;">&nbsp;&nbsp; 1 </td>

                    <td style="width:30%; text-align:left;">&nbsp;&nbsp;${item.precioUnitario}</td>
                </tr>
            `);
        }) 
      $("#subtotal").text(localStorage.getItem("lsSubTotal"));
      $("#total").text(localStorage.getItem("lsTotal"));
      window.print();
      localStorage.setItem("lsPrintOK","OK");
      location.href ="/Tropical/FacturaCli.html";
  });  
</script>