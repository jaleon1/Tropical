<!DOCTYPE html>
<html>

<head>
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/Session.js"></script>         
  <!-- JS Moments -->
  <script src="assets/js/moment.min.js"></script>
  <!-- JS dataTables -->
  <script src="assets/js/jquery.dataTables.min.js"></script>
  <script src="assets/js/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
  <link href="assets/css/print.css" rel="stylesheet">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body>
  <div id="ticket">
    <p class="centrado">TROPICAL SNO. <label id="bodega"></label><br>
      3-102-655700,  S.R.L.<br>
      Tel.2245-0515, Fax: 2297-0998<br>
      FACTURA # <label id=factura></label><br>
      Fecha: <label id="fecha"></label><br>
      Usuario: <label id="usuario"></label>
    </p>
    <label>--------------------------------------------------------</label>
    <table>
      <tbody id="tableBody-TicketFactura">
        <tr>
            <td style="width:10%; text-align:left;">CN</td>
            <td style="width:40%; text-align:left;">Detalle</td>
            <td style="width:20%; text-align:left;">Precio</td>
            <td style="width:20%; text-align:right;">Total</td>
          </tr>
      </tbody>
    </table>
    <label>--------------------------------------------------------</label>
    <table style="width:100%;">
      <tbody id="tableBody-TicketTotal">
      </tbody>
    </table>
    <label>--------------------------------------------------------</label>
    <p style="text-align:left;">
        Gracias por su Compra</br>
        Una vez facturado no se aceptan</br> 
        cambios o devoluciones.</br></br>
        Autorizado para impresión mediante</br>
        Resolución 48-2016 de DGTD</br></br>
        Visitenos en Facebook:  TSCR y déjenos</br> 
        sus comentarios
    </p>
    <label>--------------------------------------------------------</label>
  </div>
  <script src="assets/js/FacturaCli.js"></script>
  <script src="assets/js/Factura.js"></script>
  <script src="assets/js/virtualNumPad/virtualNumPad.js"></script>
</body>

</html>

<script>
    $(document).ready(function () {

      $("#factura").text(localStorage.getItem("lsFactura"));
      $("#fecha").text(localStorage.getItem("lsFecha"));  
      $("#bodega").text(localStorage.getItem("lsBodega"));
      $("#usuario").text(localStorage.getItem("lsUsuario"));
      $("#tarjetaCredito").text(localStorage.getItem("lsTarjetaCredito"));  
      $("#efectivo").text(localStorage.getItem("lsEfectivo"));
      $("#vuelto").text(localStorage.getItem("lsVuelto"));
      $("#dif").text(localStorage.getItem("lsDif"));
      
      var listaProducto = localStorage.getItem("lsListaProducto");
      listaProducto = JSON.parse(listaProducto);
      $.each(listaProducto, function (i, item) {
        $('#tableBody-TicketFactura').append(`
              <tr> 
                  <td style="width:10%; text-align:left;">1</td>
                  <td style="width:40%; text-align:left;">${item.detalle}</td>
                  <td style="width:20%; text-align:left;">¢${item.precioUnitario.toFixed(2)}</td>
                  <td style="width:20%; text-align:right;"></td>
              </tr>
          `);
      }) 
      $('#tableBody-TicketTotal').append(`
        <tr><td><label style="width:60%; text-align:left;">Total I.V.I.</label></td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td style="width:20%; text-align:right;">¢${parseFloat(localStorage.getItem("lsTotal")).toFixed(2)}</td></tr>
        <tr><td><label style="width:60%; text-align:left;">Tipo de Pago:</labe></td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td style="width:20%; text-align:right;">----------</td></tr>
        <tr><td><label style="width:60%; text-align:left;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Efectivo:</label></td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td id="efectivo" style="width:20%; text-align:right;">¢${localStorage.getItem("lsEfectivo")}</td></tr>
        <tr><td><label style="width:60%; text-align:left;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vuelto:</label></td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td id="vuelto" style="width:20%; text-align:right;">¢${localStorage.getItem("lsVuelto")}</td></tr>
        <tr><td><label style="width:60%; text-align:left;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dif:</label></td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td id="dif" style="width:20%; text-align:right;">¢${localStorage.getItem("lsDif")}</td></tr>
        <tr><td><label style="width:60%; text-align:left;">Tarjeta Crédito:</label></td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td id="tarjetaCredito" style="width:20%; text-align:right;">¢${localStorage.getItem("lsTarjetaCredito")}</td></tr>
      `);
        //$("#totalivi").text(parseFloat(localStorage.getItem("lsTotal")).toFixed(2));
      window.print();
      localStorage.setItem("lsPrintOK","OK");
      // location.href ="/Tropical/FacturaCli.html";
      location.href ="/FacturaCli.html";
  });  
</script>