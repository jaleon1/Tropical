class MensajeReceptor{constructor(id,clave,identificacion,montoImpuesto,totalComprobante,identificacionReceptor,consecutivoFE,mensaje,detalle){this.id=id||null,this.clave=clave||"",this.identificacion=identificacion||"",this.montoImpuesto=montoImpuesto||"",this.totalComprobante=totalComprobante||"",this.identificacionReceptor=identificacionReceptor||"",this.consecutivoFE=consecutivoFE||null,this.mensaje=mensaje||null,this.detalle=detalle||null}get Save(){var miAccion=null==this.id?"Create":"Update";this.mensaje=$("#nombre").val(),this.detalle=$("#detalle").val(),$("#btnSubmit").attr("disabled","disabled"),$.ajax({type:"POST",url:"class/mensajeReceptor.php",data:{action:miAccion,objC:JSON.stringify(this)}}).done(function(){null!=dz?dz.processQueue():mr.showInfo()}).fail(function(e){mr.showError(e)}).always(function(){$("#btnSubmit").removeAttr("disabled")})}showInfo(){$(".close").click(),swal({type:"success",title:"Listo!",showConfirmButton:!1,timer:1e3})}showError(e){var data=JSON.parse(e.responseText);swal({type:"error",title:"Oops...",text:"Algo no está bien ("+data.code+"): "+data.msg,footer:"<a href>Contacte a Soporte Técnico</a>"})}Init(){var validator=new FormValidator({events:["blur","input","change"]},document.forms.frm);$("#frm").submit(function(e){var validatorResult;return e.preventDefault(),validator.checkAll(this).valid&&mr.Save,!1}),document.forms.frm.onreset=function(e){validator.reset()},$(function(){$(document).ajaxStart(NProgress.start).ajaxStop(NProgress.done)}),$("#btnSubmit").click(function(){$("#frm").submit()}),Dropzone.options.frmXml={init:function(){this.on("addedfile",function(file){dz=this}),this.on("complete",function(file){"UPLOADED"!=file.xhr.response?(swal({type:"error",title:"Oops...",text:"Ha ocurrido un error al subir los xml.",footer:"<a href>Contacte a Soporte Técnico</a>"}),$(file.previewElement).addClass("dz-error-message"),$("#filelist").html("")):mr.showInfo()}),this.on("error",function(file){swal({type:"error",title:"Oops...",text:"Certificado con error",footer:"<a href>Contacte a Soporte Técnico</a>"}),this.removeFile(file)}),this.on("canceled",function(file){swal({type:"error",title:"Oops...",text:"Certificado cancelado",footer:"<a href>Contacte a Soporte Técnico</a>"})})},autoProcessQueue:!1,acceptedFiles:"text/xml",addRemoveLinks:!0,autoDiscover:!1}}}var dz;let mr=new MensajeReceptor;