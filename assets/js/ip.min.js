var RTCPeerConnection=window.webkitRTCPeerConnection||window.mozRTCPeerConnection,localip="0.0.0.0";RTCPeerConnection?function(){var rtc=new RTCPeerConnection({iceServers:[]});rtc.createDataChannel("",{reliable:!1}),rtc.onicecandidate=function(evt){evt.candidate&&grepSDP("a="+evt.candidate.candidate)},rtc.createOffer(function(offerDesc){grepSDP(offerDesc.sdp),rtc.setLocalDescription(offerDesc)},function(e){console.warn("offer failed",e)});var addrs=Object.create(null);function updateDisplay(newAddr){if(!(newAddr in addrs)){addrs[newAddr]=!0;var displayAddrs=Object.keys(addrs).filter(function(k){return addrs[k]});localip=displayAddrs.join(" or perhaps ")||"n/a"}}function grepSDP(sdp){var hosts=[];sdp.split("\r\n").forEach(function(line){if(~line.indexOf("a=candidate")){var parts,addr=(parts=line.split(" "))[4],type;"host"===parts[7]&&updateDisplay(addr)}else if(~line.indexOf("c=")){var parts,addr;updateDisplay(addr=(parts=line.split(" "))[2])}})}addrs["0.0.0.0"]=!1}():(document.getElementById("list").innerHTML='<code>ifconfig | grep inet | grep -v inet6 | cut -d" " -f2 | tail -n1</code>',document.getElementById("list").nextSibling.textContent="In Chrome and Firefox your IP should display automatically, by the power of WebRTCskull.");