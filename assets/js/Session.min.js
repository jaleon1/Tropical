var Session={state:void 0,Check(){Session.state=void 0,$.ajax({type:"POST",url:"class/Usuario.php",data:{action:"CheckSession",url:window.location.href}}).done(function(e){var data=JSON.parse(e);switch(data.status){case"login":$(".right_col").show(),Session.setUsername(data.username,data.nombre,data.bodega),Session.setMenu(data.eventos),Session.state=!0,Session.sideBarDraw(data),$(".main_container").removeAttr("style");break;case"nocredencial":$(".right_col").hide(),Session.setUsername(data.username,data.nombre),Session.setMenu(data.eventos),Session.state=!1,alert("El usuario no tiene credenciales para ver esta página.");break;case"invalido":Session.state=!1,location.href="login.html"}}).fail(function(e){showError(e),location.href="login.html"})},setUsername(un,n,b){$("#call_username").html('<img src="images/logoTropical.png" alt="" > '+un+' <span class=" fa fa-angle-down" ></span> '),$("#call_name").text(n),$(".call_Bodega").text(b)},setMenu(eventos){$("#menubox").html(""),$("#menubox").append('\n            <li id="Inventario" style="display:none;">\n                <a>\n                    <i class="fa fa-reorder"></i> Inventario\n                    <span class="fa fa-chevron-down"></span>\n                </a>\n                <ul class="nav child_menu"></ul>\n            </li>\n            <li id="Facturacion" style="display:none;">\n                <a>\n                    <i class="fa fa-money"></i> Facturación\n                    <span class="fa fa-chevron-down"></span>\n                </a>\n                <ul class="nav child_menu"></ul>\n            </li>\n            <li id="Bodega" style="display:none;">\n                <a>\n                    <i class="fa fa-folder-open"></i> Bodega\n                    <span class="fa fa-chevron-down"></span>\n                </a>\n                <ul class="nav child_menu"></ul>\n            </li>\n            <li id="Hacienda" style="display:none;">\n                <a> <i class="fa fa-cog"></i> Hacienda\n                    <span class="fa fa-chevron-down"></span>\n                </a>\n                <ul class="nav child_menu"> </ul>\n            </li>\n            <li id="Sistema" style="display:none;">\n                <a> <i class="fa fa-cog"></i> Sistema\n                    <span class="fa fa-chevron-down"></span>\n                </a>\n                <ul class="nav child_menu"> </ul>\n            </li>\n        '),$.each(eventos,function(i,item){$("#"+item.menuPadre).css({display:"block"}),$("#"+item.menuPadre+" ul.nav").css({display:"block"}),$("#"+item.menuPadre+" ul.nav").append(`\n                <li>\n                    <a href="${item.url}">${item.nombre}</a>\n                </li>\n            `)})},End(){$.ajax({type:"POST",url:"class/Usuario.php",data:{action:"EndSession"}}).done(function(e){location.href="login.html"}).fail(function(e){showError(e)})},sideBarDraw(dataMenu){if($("#sidebar-menu").length){$("#sidebar-menu").empty();var menu_section=`<div class="menu_section">\n                <h3>${dataMenu.bodega}</h3>\n                <ul id="menu" class="nav side-menu">\n                    \n                </ul>\n            </div>`;$("#sidebar-menu").append(menu_section),$.each(dataMenu.eventos,function(i,item){if($("#"+item.menuPadre).length){if(!$("#"+item.id).length){var link=` <li id="${item.id}"><a href="${item.url}">${item.nombre}</a></li>`;$("#list_"+item.menuPadre).append(link)}}else{var menu=`<li id="${item.menuPadre}" ><a><i class="${item.icono}"></i> ${item.menuPadre} <span class="fa fa-chevron-down"></span></a>\n                            <ul id="list_${item.menuPadre}" class="nav child_menu">\n                                <li id="${item.id}"><a href="${item.url}">${item.nombre}</a></li>\n                            </ul>\n                        </li>`;$("#menu").append(menu)}}),"function"==typeof init_sidebar?init_sidebar():setTimeout(function(){Session.sideBarDraw(dataMenu)},500)}}};